var submitted=!1;$("#input-shipping-mode").change(function(){$(".shipping-mode").hide();$(".shipping-mode#"+this.value).show()});$("#deposit-slip-btn").click(function(){$("#deposit-slip-file").click()});$("#deposit-slip-file").change(function(a){fileToTxt(this.files[0])});$(".close-preview").click(function(a){a.preventDefault();closePreview()});$(".submit-btn").click(function(){disableInput(!0);validateInput();disableInput(!1)});
var iframeReady=function(){console.log(submitted);submitted&&$.alert({title:"Success",type:"green",content:"You order was successfull. Thank you!",buttons:{Ok:function(){window.location.reload()}}})},closePreview=function(){$(".display-upload").hide();$(".upload-btn").show();$(".upload-preview img").attr("src","");$('.upload-preview input[type="hidden"].deposit-slip').val("")},saveToCloud=function(a){$.post("http://115.84.230.75/upload.php",{file:a},function(a){a=eval("("+a+")");disableInput(!1);
"error"==a.type?$.alert({title:"Error",type:"red",content:a.message}):($(".upload-preview img").attr("src",a.data),$('.upload-preview input[type="hidden"].deposit-slip').val(a.data),$(".upload-btn").hide(),$(".display-upload").show())}).fail(function(a){$.alert({title:"Error",type:"red",content:"Something went wrong with your request. Please try again later"});disableInput(!1)})},fileToTxt=function(a){var b=new FileReader;b.readAsDataURL(a);b.onload=function(){disableInput(!0);saveToCloud(b.result)};
b.onerror=function(a){disableInput(!1);$.alert({title:"Error",type:"red",content:"Something went wrong. Please try again."})}},disableInput=function(a){a=a||!1;$(".form-control").prop("disabled",a);$(".submit-btn").prop("disabled",a);var b="Submit Order";a&&(b="Please wait...");$(".submit-btn").html(b)},validateInput=function(){var a=!1;disableInput(!0);$(".error-msg").remove();$(".input-form").removeClass("err");$(".input-form").each(function(){$(this).hasClass("required-input")&&!$(this).val()&&
(addErrorMsgToElementGroup(this,"This field is required"),$(this).addClass("err"),a=!0)});a||$("#input-contact").val().match(/^\d+$/)||(addErrorMsgToElementGroup("#input-contact","Must be a number"),a=!0);a||$("#input-qty").val().match(/^\d+$/)||(addErrorMsgToElementGroup("#input-qty","Must be a number"),a=!0);a||(a="pickup"==$("#input-shipping-mode").val()?validatePickup():validateDelivery());a?($.alert({title:"Error",type:"red",content:"Please correct the error(s) in the form to continue placing an order"}),
disableInput(!1)):(submitted=!0,$(".input-form").each(function(){var a=$(this).attr("id").replace(/^input-/,"");$(".real-form #"+a).val($(this).val())}),$("#pickup-location").val($('[name="branch"]:checked').val()),$(".real-form").submit())},validatePickup=function(){return"undefined"==typeof $('[name="branch"]:checked').val()?(addErrorMsgToElementGroup("#input-shipping-mode","Please select a branch where you want to pickup your order"),!0):!1},validateDelivery=function(){return $("#input-address").val()?
!1:(addErrorMsgToElementGroup("#input-shipping-mode","Please enter your delivery address"),!0)},addErrorMsgToElementGroup=function(a,b){$(a).parents().each(function(){$(this).hasClass("form-group")&&$(this).append('<div class="error-msg"><small class="text-danger">'+b+"</small></div>")})};